@inject NavigationManager NavigationManager;

<!-- LEFT SIDEBAR START -->
<div class="iq-sidebar-logo d-flex justify-content-center align-items-center">
    <a href="/"><img src="logo/khizooo-logo-200.png" class="img-fluid" alt="khizooo Logo"></a>
</div>
<div id="sidebar-scrollbar">
    <nav class="iq-sidebar-menu" style="text-align: left;">
        <ul id="iq-sidebar-toggle" class="iq-menu" style="">
            <li id="Left-Sidebar-Portfolio"><a href="/portfolio" class="iq-waves-effect @LS_Portfolio"><span>PORTFOLIO</span></a></li>
            <li id="Left-Sidebar-Artwork"><a href="/artworks" class="iq-waves-effect @LS_Artwork"><span>ARTWORKS</span></a></li>
            <li id="Left-Sidebar-Infographic"><a href="/infographics" class="iq-waves-effect @LS_Infographic"><span>INFOGRAPHICS</span></a></li>
            <li id="Left-Sidebar-Webtool"><a href="/webtools" class="iq-waves-effect @LS_Webtool"><span>WEBTOOLS</span></a></li>
            <li id="Left-Sidebar-Freebie"><a href="/freebies" class="iq-waves-effect @LS_Freebie"><span>FREEBIES</span></a></li>
            <li id="Left-Sidebar-Freebie"><a href="/devspark" class="iq-waves-effect @LS_Devspark"><span>DEVSPARK</span></a></li>
            <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>CALCULATORS</span></a></li>

          @*   <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>DEV & CODE TOOLS</span></a></li>
            <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>CALCULATORS</span></a></li>
            <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>CALCULATORS</span></a></li>
            <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>CALCULATORS</span></a></li>
            <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>CALCULATORS</span></a></li>
            <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>CALCULATORS</span></a></li>
            <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>CALCULATORS</span></a></li>
            <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>CALCULATORS</span></a></li>
            <li id="Left-Sidebar-Calculator"><a href="/calculators" class="iq-waves-effect @LS_Calculator"><span>CALCULATORS</span></a></li> *@


        </ul>
    </nav>
</div>
<!-- LEFT SIDEBAR END -->

@code {
    string LS_Portfolio = string.Empty;
    string LS_Artwork = string.Empty;
    string LS_Infographic = string.Empty;
    string LS_Webtool = string.Empty;
    string LS_Freebie = string.Empty;
    string LS_Devspark = string.Empty;
    string LS_Calculator = string.Empty;

    protected override void OnInitialized()
    {
        NavigationManager.LocationChanged += OnLocationChanged;
        UpdateCurrentPage();
    }

    private void OnLocationChanged(object? sender, Microsoft.AspNetCore.Components.Routing.LocationChangedEventArgs e)
    {
        UpdateCurrentPage();
        InvokeAsync(StateHasChanged);
    }

    private void UpdateCurrentPage()
    {
        var currentPath = NavigationManager.ToBaseRelativePath(NavigationManager.Uri);
        var segments = currentPath.Split("/", StringSplitOptions.RemoveEmptyEntries);
        var controllerName = segments.Length > 0 ? segments[0] : string.Empty;
        LS_Portfolio = string.Empty;
        LS_Artwork = string.Empty;
        LS_Infographic = string.Empty;
        LS_Webtool = string.Empty;
        LS_Freebie = string.Empty;
        LS_Devspark = string.Empty;
        LS_Calculator = string.Empty;

        if (string.IsNullOrEmpty(controllerName) || controllerName == "index") { }
        else if (controllerName == "portfolio") { LS_Portfolio = "active"; }
        else if (controllerName == "artworks") { LS_Artwork = "active"; }
        else if (controllerName == "infographics") { LS_Infographic = "active"; }
        else if (controllerName == "webtools") { LS_Webtool = "active"; }
        else if (controllerName == "freebies") { LS_Freebie = "active"; }
        else if (controllerName == "devspark") { LS_Devspark = "active"; }
        else if (controllerName == "calculators") { LS_Calculator = "active"; }
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }
}